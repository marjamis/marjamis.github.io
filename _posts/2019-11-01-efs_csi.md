---
title: EFS CSI Plugin
date: 2019-11-02 10:15:10 +11:00
categories:
  - explanation
  - kubernetes
---

using custom DNS in DHCP option sets? you can do a:
```
echo "$(dig {fs-id}.efs.us-west-2.amazonaws.com @{ec2DNS} +short) {fs-id}.efs.us-west-2.amazonaws.com" > /etc/hosts
```
to have it override this DNS lookup which can be then used inside the CSI plugin as an IP address to the correct EFS AZ endpoint IP address as required while everything else uses your custom DNS servers. This is OK as the ip address for an EFS AZ endpoint shouldn't change unless the Filesystem itself also changes, which means a new run of the above would be required. **Note:** This will need to be configured prior to the CSI plugin being run.
